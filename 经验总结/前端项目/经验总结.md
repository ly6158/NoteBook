# 项目中遇到的问题以及后续准备解决的方案

- 开发通用业务组件时,父组件需要获取子组件的数据,获取数据存在两种方式
  - 接口在组件内部处理,通过父组件获取子组件实例,然后调用组件方法
  - 接口在父组件处理,传入到子组件
- 开发通用组件时,子组件数据抛出的几种业务场景
  - 子组件数据需要实时传递给父组件
  - 子组件数据需要点击按钮操作后传递

前端开发 踩坑记录

组件内部调用接口时需要解决父组件默认数据问题(这个问题在报表组件 数据集选择和主题选择 出现)(目前解决方案: 父组件调用子组件方法)

组件内部实现双向绑定时 不是实时 emit 需要单独定义临时保存数据的值(这个问题在 报表组件维度分析 出现)

加载树形结构数据时, 需要考虑子集以及子集分类下的数据加载问题

下拉框的局限问题: 数据量大时数据加载和后台搜索有所冲突

下拉大数量问题()

递归引用组件,需要上下级通信采用事件总线

列表数据 点击第二页 再次查询搜索框 页码置为第一页
列表数据 删除不是第一页的数据 需要判断数据条数 处理页面是否需要回到上一页(还要考虑多选删除

el-form 回车会刷新页面问题@submit.native.prevent

看板可以拖入相同组件,会存在 id 一样,可能会出问题

看板页面 展示组件需要适配有无标题

事件总线退出页面需要销毁 不然会触发多次 $bus.$off()

数据权限 用户数据冗余部门字段 查询根据部门 id 查询会快 冗余部门全路径字段

多组织数据权限 每个组织的数据用自己的数据表

分组切换时 分组下数据加载时间不一致导致数据错乱

请求异常处理,异常拦截问题,请求被拦截后后面的逻辑应该不执行

EChart 图表 横坐标显示不下时 截取省略号显示

通用方法应该考虑调用方法前后的前置方法和后置方法

前端框架需要增加字典表,标识业务数据

Safari 浏览器兼容注意事项

1. 正则表达式 需要用 new RegExp()形式
2. 日期转换不支持以下写法 new Date(’2022-1-1’) 需要补全 new Date(’2022-01-01’)
3. 鼠标拖动事件 会影响 user-select
4. Safari 下 border-radius 失效问题, 原因存在 transform 动画 transform 动画执行时 border-radius 会失效
